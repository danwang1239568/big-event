import{u as b,r as n,c as E,w as l,o as V,b as o,f as i,Q as y,b0 as x}from"./index-5_l7CkRI.js";import{E as U,a as k}from"./el-form-item-C-W3Sof-.js";import{E as C}from"./_plugin-vue_export-helper-CGjAqcjE.js";import{E as R}from"./el-input-D-7gbnS0.js";import{p as S}from"./pageContainer-mrrkNs4A.js";import{b as c}from"./user-CIgd_CsP.js";import{E as q}from"./index-CDVhATiR.js";import"./_baseClone-CqkKz-iw.js";import"./el-scrollbar-CpVWIDw7.js";import"./aria-BUADUvnR.js";const A={__name:"userPassword",setup(B){const w=x(),d=b(),r=n({old_pwd:"",new_pwd:"",re_pwd:""}),_={old_pwd:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(p,e,t){e===r.value.old_pwd?t(new Error("新密码不能与旧密码相同")):t()}}],re_pwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(p,e,t){e!==r.value.new_pwd?t(new Error("两次输入的密码不一致!")):t()}}]},u=n(),f=async()=>{await u.value.validate(),await c(r.value),q.success("密码修改成功"),d.setToken(""),d.setUser({}),w.push("/login")},g=()=>{u.value.resetFields()};return(p,e)=>{const t=R,s=U,m=C,v=k;return V(),E(S,{title:"重置密码"},{default:l(()=>[o(v,{model:r.value,rules:_,"label-width":"100px",ref_key:"formRef",ref:u,onSubmit:e[3]||(e[3]=y(()=>{},["prevent"])),style:{width:"50%"}},{default:l(()=>[o(s,{prop:"old_pwd",label:"旧密码"},{default:l(()=>[o(t,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,{prop:"new_pwd",label:"新密码"},{default:l(()=>[o(t,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,{prop:"re_pwd",label:"确认新密码"},{default:l(()=>[o(t,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,null,{default:l(()=>[o(m,{type:"primary",onClick:f},{default:l(()=>e[4]||(e[4]=[i("提交")])),_:1}),o(m,{type:"default",onClick:g},{default:l(()=>e[5]||(e[5]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{A as default};
