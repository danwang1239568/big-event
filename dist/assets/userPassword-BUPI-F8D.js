import{u as b,r as m,c as E,w as o,o as V,b as l,f as i,a1 as y,bK as x,bL as U,E as k}from"./index-T3F7Jh6l.js";import{E as C,a as R}from"./el-form-item-B_LMvvdl.js";import{E as S}from"./_plugin-vue_export-helper-BsPb1rl_.js";import{E as c}from"./el-input-Ck746CmH.js";import{p as q}from"./pageContainer-BhKIblhj.js";import"./_baseClone-BzzddaR3.js";import"./el-scrollbar-Lezc_uvF.js";const K={__name:"userPassword",setup(B){const w=x(),d=b(),r=m({old_pwd:"",new_pwd:"",re_pwd:""}),_={old_pwd:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(p,e,t){e===r.value.old_pwd?t(new Error("新密码不能与旧密码相同")):t()}}],re_pwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(p,e,t){e!==r.value.new_pwd?t(new Error("两次输入的密码不一致!")):t()}}]},u=m(),f=async()=>{await u.value.validate(),await U(r.value),k.success("密码修改成功"),d.setToken(""),d.setUser({}),w.push("/login")},g=()=>{u.value.resetFields()};return(p,e)=>{const t=c,s=C,n=S,v=R;return V(),E(q,{title:"重置密码"},{default:o(()=>[l(v,{model:r.value,rules:_,"label-width":"100px",ref_key:"formRef",ref:u,onSubmit:e[3]||(e[3]=y(()=>{},["prevent"])),style:{width:"50%"}},{default:o(()=>[l(s,{prop:"old_pwd",label:"旧密码"},{default:o(()=>[l(t,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,{prop:"new_pwd",label:"新密码"},{default:o(()=>[l(t,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,{prop:"re_pwd",label:"确认新密码"},{default:o(()=>[l(t,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,null,{default:o(()=>[l(n,{type:"primary",onClick:f},{default:o(()=>e[4]||(e[4]=[i("提交")])),_:1}),l(n,{type:"default",onClick:g},{default:o(()=>e[5]||(e[5]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{K as default};
