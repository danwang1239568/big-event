import{u as I,r as E,a as b,c,o as _,w as l,b as s,d as t,e as n,f as y,g as v,h as q,E as C,i as M,j as P,k as U,l as g}from"./index-T3F7Jh6l.js";import{E as S,a as j}from"./el-col-Crzj-Ut0.js";import{E as z,a as A}from"./el-form-item-B_LMvvdl.js";import{_ as L,E as Z}from"./_plugin-vue_export-helper-BsPb1rl_.js";import{E as $}from"./el-checkbox-jvcfNxK0.js";import{E as h}from"./el-input-Ck746CmH.js";import"./_baseClone-BzzddaR3.js";import"./isEqual-Vdmn5r_e.js";const D={class:"remenber"},G={__name:"loginPage",setup(H){const i=I();let u=E(0);const w=b({username:[{required:!0,message:"必填",trigger:"change"},{min:6,max:10,message:"6-10位",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"必须为数字和字母",trigger:["blur","change"]}],password:[{required:!0,message:"必填",trigger:"change"},{min:6,max:10,message:"6-10位",trigger:"blur"}],repassword:[{validator:(f,e,d)=>{e!==o.password?d(new Error("两次输入的密码不一致")):d()},trigger:"blur"}]}),o=b({username:"",password:"",repassword:""}),p=E(null),x=()=>{u.value=u.value==0?1:0,p.value.resetFields()},R=async()=>{await p.value.validate(),await q(o),C.success("注册成功"),u.value=0},B=async()=>{await p.value.validate();const f=await M(o);i.setToken(f.data.token),C.success("登录成功"),P.push("/article/channel"),i.getUser()},F=async()=>{i.setToken("tempToken")};return(f,e)=>{const d=S,m=h,a=z,N=$,V=Z,k=A,T=j;return _(),c(T,null,{default:l(()=>[s(d,{span:12},{default:l(()=>[t("div",{class:"bg",onClick:F})]),_:1}),s(d,{span:6,push:3},{default:l(()=>[n(u)==0?(_(),c(k,{key:0,class:"form",model:o,ref_key:"formRef",ref:p,rules:w},{default:l(()=>[e[7]||(e[7]=t("h2",null,"登录",-1)),s(a,{class:"ipt",prop:"username"},{default:l(()=>[s(m,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=r=>o.username=r),"prefix-icon":n(U),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),s(a,{class:"ipt",prop:"password"},{default:l(()=>[s(m,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.password=r),"prefix-icon":n(g),placeholder:"请输入密码",type:"password"},null,8,["modelValue","prefix-icon"])]),_:1}),s(a,null,{default:l(()=>[t("div",D,[s(N,{label:"记住我"}),e[5]||(e[5]=t("p",null,"忘记密码",-1))])]),_:1}),s(a,null,{default:l(()=>[s(V,{onClick:B,class:"btn",type:"primary"},{default:l(()=>e[6]||(e[6]=[y("登录")])),_:1})]),_:1}),t("p",{onClick:x},"注册→")]),_:1},8,["model","rules"])):v("",!0),n(u)==1?(_(),c(k,{key:1,class:"form",model:o,ref_key:"formRef",ref:p,rules:w},{default:l(()=>[e[9]||(e[9]=t("h2",null,"注册",-1)),s(a,{class:"ipt",prop:"username"},{default:l(()=>[s(m,{modelValue:o.username,"onUpdate:modelValue":e[2]||(e[2]=r=>o.username=r),"prefix-icon":n(U),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),s(a,{class:"ipt",prop:"password"},{default:l(()=>[s(m,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.password=r),"prefix-icon":n(g),placeholder:"请输入密码",type:"password"},null,8,["modelValue","prefix-icon"])]),_:1}),s(a,{prop:"repassword"},{default:l(()=>[s(m,{modelValue:o.repassword,"onUpdate:modelValue":e[4]||(e[4]=r=>o.repassword=r),"prefix-icon":n(g),placeholder:"请再次输入密码",type:"password"},null,8,["modelValue","prefix-icon"])]),_:1}),s(a,null,{default:l(()=>[s(V,{class:"btn",type:"primary",onClick:R},{default:l(()=>e[8]||(e[8]=[y("注册")])),_:1})]),_:1}),t("p",{onClick:x},"←返回")]),_:1},8,["model","rules"])):v("",!0)]),_:1})]),_:1})}}},se=L(G,[["__scopeId","data-v-b310cb7c"]]);export{se as default};
